@model TN.ViewModels.Catalog.Question.QuestionModel

<h1>Add questions for exam @Model.ExamID</h1>

<div class="row">
    <div class="col-8 create-form">
        <form id="add-quiz">
            <div class="form-group">
                <label for="ques-content">Question content:</label>
                <textarea class="form-control" id="quescontent" required name="QuesContent"></textarea>
            </div>
            <div class="form-group d-flex flex-row align-items-center">
                <label class="col-3 m-0" for="choice-a">Choice <strong>A</strong>:</label>
                <input required name="Option1" type="text" id="choice-a" class="form-control" />
            </div>
            <div class="form-group d-flex flex-row align-items-center">
                <label class="col-3 m-0" for="choice-b">Choice <strong>B</strong>:</label>
                <input required name="Option2" type="text" id="choice-b" class="form-control" />
            </div>
            <div class="form-group d-flex flex-row align-items-center">
                <label class="col-3 m-0" for="choice-c">Choice <strong>C</strong>:</label>
                <input required name="Option3" type="text" id="choice-c" class="form-control" />
            </div>
            <div class="form-group d-flex flex-row align-items-center">
                <label class="col-3 m-0" for="choice-d">Choice <strong>D</strong>:</label>
                <input required name="Option4" type="text" id="choice-d" class="form-control" />
            </div>
            <div class="form-group d-flex flex-row align-items-center">
                <label class="col-3 m-0 control-label" for="answer">Answer:</label>
                <select id="answer" name="Answer" class="form-control col-3">
                    <option value="A" selected>A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                </select>
            </div>
            <div class="form-group">
                <input type="hidden" id="examId" value="@Model.ExamID" asp-for="ExamID" class="form-control" />
            </div>
            <div class="form-group">
                <input id="add-btn" type="submit" value="Add" class="btn btn-success" />
                <input type="reset" value="Reset" class="btn btn-outline-dark" />
                <button id="exit-btn" class="btn btn-outline-danger">Exit</button>
            </div>
        </form>
    </div>
    <div class="col-4 list-question ml-auto">
        <div class="row m-0"><strong>All questions here</strong></div>
        <div style="height:300px;overflow:auto" id="all-questions">

        </div>
    </div>
</div>

<script>
    loadData = function () {
        let examId = $("input#examId").val()
        $.ajax({
            url: `/User/Questions/GetListQuestionsViewComp?examId=${examId}`,
            method: "GET",
            dataType: "html",
            success: function (result) {
                $("#all-questions").html(result);
            }
        });
    }

    loadData();

    $("#exit-btn").on('click', function (event) {
        event.preventDefault();
        let examId = $("input#examId").val()
        window.location.replace(`/User/Questions/GetByExam?examId=${examId}`);
    })
    $("#add-quiz").on('submit', function (event) {
        event.preventDefault();
        let newQuestion = {
            quesContent: $("textarea[name=QuesContent]").val(),
            option1: $("input[name=Option1]").val(),
            option2: $("input[name=Option2]").val(),
            option3: $("input[name=Option3]").val(),
            option4: $("input[name=Option4]").val(),
            answer: $("select[name=Answer]").val(),
            examId: $("input#examId").val(),
        }
        $.ajax({
            method: "POST",
            url: "/User/Questions/Create",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(newQuestion),
            success: function (response) {
                console.log(response);
                loadData();
            },
            error: function (err) {
                console.error(err);
            }
        })
    })
</script>


@*<form>
        <div class="text-danger">@(ViewData["msg"]==null?"":ViewData["msg"])</div>
        <div class="form-group">
            <label asp-for="QuesContent" class="control-label">Question</label>
            <input asp-for="QuesContent" class="form-control" />
            <span asp-validation-for="QuesContent" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Option1" class="control-label">- A -</label>
            <input asp-for="Option1" class="form-control" />
            <span asp-validation-for="Option1" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Option2" class="control-label">- B -</label>
            <input asp-for="Option2" class="form-control" />
            <span asp-validation-for="Option2" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Option3" class="control-label">- C -</label>
            <input asp-for="Option3" class="form-control" />
            <span asp-validation-for="Option3" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Option4" class="control-label">- D -</label>
            <input asp-for="Option4" class="form-control" />
            <span asp-validation-for="Option4" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Answer" class="control-label">Correct Answer</label>
            <select asp-for="Answer" class="form-control">
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>
        </div>
        <div class="form-group">
            <input type="hidden" value="@Model.ExamID" asp-for="ExamID" class="form-control" />
        </div>
        <div class="form-group">
            <input id="btnSave" type="button" value="Create" class="btn btn-primary" />
            <input type="reset" value="Reset" class="btn btn-dark" />
        </div>
    </form>*@